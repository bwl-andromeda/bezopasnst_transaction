# Отчет о выполнении задачи "Интернет-транзакции"

## Постановка задачи

Задача заключается в реализации web-сервиса таким образом, чтобы транзакции, которые проводились на данном сайте, были безопасны.

### Цели и Предположения Безопасности (ЦПБ)

#### Цели:
1. Обеспечение безопасности передачи данных платежа
2. Предоставление уникальных данных для каждой транзакции
3. Обеспечение конфиденциальности данных
4. Целостность транзакций и успешная доставка

#### Предположения:
1. Применение второго фактора как предоставление безопасности для авторизации транзакции
2. Карта с номером авторизации транзакции
3. Токен одноразового пароля (OTP), основанный на времени, например OATH TOTP (одноразовый пароль на основе времени)
4. OTP, отправленный по SMS или предоставленный по телефону
5. Цифровая подпись, предоставленная смарт-картой или смартфоном
6. Токен запроса-ответа, включая автономные устройства считывания карт или решения, сканирующие данные транзакций с экрана компьютера пользователя

## Архитектура решения

### Компоненты

| Название | Назначение |
|----|----|
| *Веб-сервис* | Реализация бизнес-логики в виде микросервисов по предоставлению услуг, которые связаны с транзакциями |
| *Мобильное приложение* | Реализация бизнес-логики на мобильном устройстве |
| *Модуль безопасности контроля авторизаций* | Отдельный микросервис, который отвечает за авторизацию транзакций |
| *Центр транзакций* | Отдельный микросервис, который проводит транзакции |

[Архитектура](architecture.png "Общая архитектура")

### Алгоритм работы решения
  1. Пользователь инициирует транзакцию через веб-сервис или мобильное приложение.
  2. Веб-сервис или мобильное приложение отправляет запрос на авторизацию в модуль безопасности контроля авторизаций.
  3. Модуль безопасности контроля авторизаций запрашивает второй фактор аутентификации у пользователя (например, OTP).
  4. Пользователь предоставляет второй фактор аутентификации.
  5. Модуль безопасности контроля авторизаций проверяет предоставленные данные и, в случае успеха, генерирует уникальный токен для транзакции.
  6. Веб-сервис или мобильное приложение отправляет запрос на проведение транзакции в центр транзакций, включая уникальный токен.
  7. Центр транзакций проверяет токен у модуля безопасности контроля авторизаций.
  8. При успешной проверке токена центр транзакций проводит транзакцию.
  9. Центр транзакций отправляет подтверждение о выполнении транзакции веб-сервису или мобильному приложению.
  10. Веб-сервис или мобильное приложение информирует пользователя об успешном завершении транзакции.

## Безопасность

### Выполнение целей безопасности

#### Обеспечение безопасности передачи данных платежа
  1. Использование протокола HTTPS для шифрования всех коммуникаций между компонентами системы.
  2. Применение современных алгоритмов шифрования для защиты данных в процессе передачи.

#### Предоставление уникальных данных для каждой транзакции
  1. Генерация уникального токена для каждой транзакции модулем безопасности контроля авторизаций.
  2. Использование временных меток и случайных чисел для обеспечения уникальности токенов.

#### Обеспечение конфиденциальности данных
  1. Хранение чувствительных данных в зашифрованном виде.
  2. Применение принципа минимальных привилегий для доступа к данным.
  3. Использование токенизации для замены реальных данных карт на токены при обработке платежей.

#### Целостность транзакций и успешная доставка
  1. Использование цифровых подписей для обеспечения целостности данных транзакций.
  2. Реализация механизма подтверждения и сверки транзакций.
  3. Внедрение системы мониторинга и логирования для отслеживания статуса транзакций.

### Компрометация сервисов

#### Компрометация веб-сервиса
  1. Ограничение доступа веб-сервиса к чувствительным данным.
  2. Использование принципа наименьших привилегий для операций веб-сервиса.
  3. Регулярное обновление и патчинг веб-сервиса для устранения уязвимостей.

#### Компрометация мобильного приложения
  1. Реализация механизмов обнаружения руткитов и джейлбрейков на устройствах.
  2. Использование шифрования для хранения локальных данных на устройстве.
  3. Применение техник обфускации кода для защиты от реверс-инжиниринга.

#### Компрометация модуля безопасности контроля авторизаций
  1. Изоляция модуля в отдельной защищенной сети.
  2. Использование аппаратных модулей безопасности (HSM) для хранения криптографических ключей.
  3. Внедрение системы мониторинга аномалий для обнаружения подозрительной активности.

#### Компрометация центра транзакций
  1. Реализация многоуровневой системы авторизации для критических операций.
  2. Внедрение механизмов аудита и логирования всех действий в центре транзакций.
  3. Регулярное проведение тестирования на проникновение и аудита безопасности.

### Дополнительные меры безопасности
  1. Внедрение системы обнаружения и предотвращения вторжений (IDS/IPS).
  2. Реализация механизма блокировки учетных записей после определенного числа неудачных попыток входа.
  3. Использование геолокации для выявления подозрительных транзакций.
  4. Внедрение системы анализа поведения пользователей для выявления аномальной активности.
  5. Регулярное проведение обучения сотрудников по вопросам информационной безопасности.

## Тестирование

### Функциональное тестирование
  1. Проверка успешного проведения транзакции с корректными данными.
  2. Тестирование отказа в проведении транзакции при неверном втором факторе аутентификации.
  3. Проверка уникальности генерируемых токенов для каждой транзакции.
  4. Тестирование корректной работы системы при высокой нагрузке.

### Тестирование безопасности
  1. Проведение тестирования на проникновение для всех компонентов системы. Пример: [Техника тестирования Black Box](https://mate.academy/blog/ru/qa-ru/black-box-testing/)
  2. Сканирование на наличие известных уязвимостей в используемом программном обеспечении.
  3. Тестирование устойчивости системы к атакам типа "человек посередине" (MITM).
  4. Проверка корректности работы механизмов шифрования и хеширования.

### Нагрузочное тестирование
  1. Симуляция высокой нагрузки на систему для проверки ее производительности и стабильности. Пример инструмента который может это сделать: [Postman](https://www.postman.com/)
  2. Тестирование системы на устойчивость к DDoS-атакам.

### Тестирование отказоустойчивости
  1. Проверка работоспособности системы при отказе одного из компонентов.
  2. Тестирование механизмов восстановления после сбоев.

## Заключение

Предложенная архитектура решения для обеспечения безопасности интернет-транзакций учитывает основные аспекты безопасности, включая конфиденциальность, целостность и доступность данных. Использование микросервисной архитектуры позволяет обеспечить гибкость и масштабируемость системы, а также изолировать критические компоненты для повышения общего уровня безопасности.

Внедрение многофакторной аутентификации, уникальных токенов для каждой транзакции и строгих механизмов авторизации значительно снижает риски несанкционированного доступа и мошенничества. Регулярное тестирование и аудит безопасности, а также постоянный мониторинг системы позволят своевременно выявлять и устранять потенциальные уязвимости.

Для дальнейшего повышения уровня безопасности рекомендуется рассмотреть возможность внедрения дополнительных технологий, таких как машинное обучение для выявления аномального поведения и блокчейн для обеспечения неизменяемости и прозрачности транзакций.


## Источники данных на котором основывался данный отчет:
[OWASP.ORG](https://cheatsheetseries.owasp.org/cheatsheets/Transaction_Authorization_Cheat_Sheet.html)
